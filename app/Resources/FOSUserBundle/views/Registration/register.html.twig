{% extends "base.html.twig" %}

{% block title %}Inscription{% endblock %}

{% block titre %}Formulaire d'inscription{% endblock %}

{% block contenu %}

    <div class="row">
        <div class="col-xs-12 col-sm-10 col-md-4 col-sm-offset-1 col-md-offset-4">
            <a class="btn btn-facebook btn-block" id="login-facebook" href="{{ path('hwi_oauth_service_redirect', {"service": "facebook"}) }}">
                <i class="fa fa-facebook" aria-hidden="true"></i>
                S'inscrire avec Facebook
            </a>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-md-4 col-sm-offset-1 col-md-offset-4">
            <a class="btn btn-twitter btn-block" id="login-twitter" href="{{ path('hwi_oauth_service_redirect', {"service": "twitter"}) }}">
                <i class="fa fa-twitter" aria-hidden="true"></i>
                S'inscrire avec Twitter
            </a>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-md-4 col-sm-offset-1 col-md-offset-4">
            <a class="btn btn-google btn-block" id="login-google" href="{{ path('hwi_oauth_service_redirect', {"service": "google"}) }}">
                <i class="fa fa-google" aria-hidden="true"></i>
                S'inscrire avec Google
            </a>
        </div>
    </div>
    <br>

    <div class="row">
        <div class="col-xs-12 col-sm-10 col-md-4 col-sm-offset-1 col-md-offset-4 well">

            {{ form_start(form , {'form-type' : 'horizontal', 'attr' : {'id' : 'formInscription'}}) }}

            {{ form_errors(form) }}

            {{ form_row(form.username) }}
            {{ form_row(form.email) }}
            {{ form_row(form.plainPassword) }}

            {{ form_rest(form) }}

            <div id='recaptcha' class="g-recaptcha"
                 data-sitekey="{{ recaptcha }}"
                 data-callback="onSubmit"
                 data-size="invisible"></div>

            <input type="submit" class="btn btn-primary" id="_submit" name="_submit" value="Valider">

            {{ form_end(form) }}

            {% block javascripts %}
                <script src='https://www.google.com/recaptcha/api.js' async defer></script>
                <script>
                    // Ne pas supprim√©, callback recaptcha
                    function onSubmit(token) {
                        // On rempli le champ de formulaire Symfony
                        $('#{{ form.captcha.vars.id }}').val(token);
                        $('#formInscription').submit();
                    }

                    function validate(event) {
                        event.preventDefault();
                        grecaptcha.execute();
                    }

                    function onload() {
                        var element = document.getElementById('_submit');
                        element.onclick = validate;
                    }

                    onload();
                </script>
            {% endblock %}


        </div>
    </div>
{% endblock %}
